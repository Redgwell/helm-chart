---
# Generated by boilr at Thu, 01 Dec 2016 19:58:32 CET
apiVersion: "extensions/v1beta1"
kind: "Job"
metadata:
  labels:
    application: "vault"
    role: "secret-management"
  name: "secret-management"
  namespace: "www-example-com"
spec:
  template:
    metadata:
      labels:
        application: "vault"
        role: "secret-management"
    spec:
      # volumes:
      # - name: "secret-management-etc-conf-d"
      # configMap:
      #   name: "secret-management-etc-conf-d"
      # - name: "secret-management-data"
      #   hostPath:
      #     path: /data/secret-management/
      containers:
      - name: "vault"
        # env:
        # - name: "FOO"
        #   value: "BAR"
        image: "vault:latest" # Todo: Update this
        imagePullPolicy: "Always"
        # args:
        #   - "command"
        #   - "line"
        #   - "arguments"
        resources:
          limits:
            cpu: "100m"
            memory: "512Mi"
          requests:
            cpu: "100m"
            memory: "512Mi"
        securityContext:
          privileged: true
          # capabilities:
            # add:
              # - SETPCAP
              # - SYS_MODULE
              # - SYS_RAWIO
              # - SYS_PACCT
              # - SYS_ADMIN
              # - SYS_NICE
              # - SYS_RESOURCE
              # - SYS_TIME
              # - SYS_TTY_CONFIG
              # - MKNOD
              # - AUDIT_WRITE
              # - AUDIT_CONTROL
              # - MAC_OVERRIDE
              # - MAC_ADMIN
              # - NET_ADMIN
              # - SYSLOG
              # - CHOWN
              # - NET_RAW
              # - DAC_OVERRIDE
              # - FOWNER
              # - DAC_READ_SEARCH
              # - FSETID
              # - KILL
              # - SETGID
              # - SETUID
              # - LINUX_IMMUTABLE
              # - NET_BIND_SERVICE
              # - NET_BROADCAST
              # - IPC_LOCK
              # - IPC_OWNER
              # - SYS_CHROOT
              # - SYS_PTRACE
              # - SYS_BOOT
              # - LEASE
              # - SETFCAP
              # - WAKE_ALARM
              # - BLOCK_SUSPEND
        ports:
        - containerPort: 80
          protocol: "TCP"
          name: "http"
        # volumeMounts:
        # - name: "secret-management-etc-conf-d"
        #   readOnly: true
        #   mountPath: "/etc/secret-management/conf.d"
        # - name: "secret-management-data
        #   readOnly: false
        #   mountPath: "/data"
        livenessProbe:
          tcpSocket:
            port: 80
          initialDelaySeconds: 5
          timeoutSeconds: 1
        readinessProbe:
          tcpSocket:
            port: http
          initialDelaySeconds: 5
          timeoutSeconds: 1
      restartPolicy: "Never"
      securityContext: {}
